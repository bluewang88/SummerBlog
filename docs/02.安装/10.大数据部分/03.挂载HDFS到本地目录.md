---
title: 挂载HDFS到本地目录
date: 2021-03-05 15:16:20
permalink: /pages/ea7c2e/
categories:
  - 安装
  - 大数据部分
tags:
  - hadoop
  - HDFS
---

Hadoop新特性：支持通过NFSv3挂载HDFS文件系统到用户的本地文件目录；也就是说：允许用户像访问本地文件系统一样访问HDFS！这对于普通用户来说大大的简化了HDFS的使用。summer记录下如何将HDFS文件系统挂载到Linux本地中。

<!-- more -->

## 1.部署架构图

![](https://cdn.jsdelivr.net/gh/summerking1/image@main/0305-2.png)

## 2.实现效果

1. 用户可以浏览HDFS文件系统通过本地的文件系统。
2. 用户可以下载HDFS文件在本地文件系统。
3. 用户可以直接上传文件从本地文件系统到hdfs。
4. 用户可以通过挂载点将数据直接流到HDFS。

## 3.部署详解

> 这里使用2台主机举例：一台作为hadoop文件系统HDFS，另外1台作为客户机挂载HDFS到本地文件系统。

主机 | 主机名 | IP
--|--|--
HDFS服务器 |	Master	| 192.168.0.95
PC1客户端  | 	Node1	| 192.168.0.96

## 4.HDFS服务端操作

1. 先停止HDFS服务端

```shell
[root@master sbin]# ./stop-dfs.sh 
Stopping namenodes on [apiserver.cluster.local]
apiserver.cluster.local: stopping namenode
localhost: stopping datanode
Stopping secondary namenodes [0.0.0.0]
0.0.0.0: stopping secondarynamenode
[root@master sbin]# jps
9150 Jps
```

2. 编辑配置文件

::: encrypt encrypted key=key owners=summer
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
0JxRyAp8v8Q+vsgmGZ7DbbCX82XmFuJQ*
:::


3. 启动HDFS的NFS

> 启动NFS一共有三个守护进程，分别为 portmap，mountd和nfsd，NFS网关进程同时具有nfsd和mountd。这里我利用Hadoop自带的包启动

```shell
[root@master hadoop]# service nfs stop  //停止平台提供的nfs/rpcbind/portmap服务
Redirecting to /bin/systemctl stop nfs.service
[root@master hadoop]# service rpcbind stop
Redirecting to /bin/systemctl stop rpcbind.service
Warning: Stopping rpcbind.service, but it can still be activated by:
  rpcbind.socket
[root@master hadoop]# cd ../../sbin/
[root@master sbin]# ./start-dfs.sh   //启动hdfs文件系统
Starting namenodes on [apiserver.cluster.local]
apiserver.cluster.local: starting namenode, logging to /summer/hadoop/logs/hadoop-root-namenode-master.out
localhost: starting datanode, logging to /summer/hadoop/logs/hadoop-root-datanode-master.out
Starting secondary namenodes [0.0.0.0]
0.0.0.0: starting secondarynamenode, logging to /summer/hadoop/logs/hadoop-root-secondarynamenode-master.out
[root@master sbin]# jps  //验证进程是否启动
88064 SecondaryNameNode
87028 DataNode
89551 Jps
86446 NameNode
[root@master sbin]# ./hadoop-daemon.sh start portmap  //启动包含portmap的包(需要root权限):
starting portmap, logging to /summer/hadoop/logs/hadoop-root-portmap-master.out
DEPRECATED: Use of this script to execute hdfs command is deprecated.
Instead use the hdfs command for it.
[root@master sbin]# jps  //验证portmap进程
88064 SecondaryNameNode
87028 DataNode
93229 Jps
86446 NameNode
92350 Portmap
[root@master sbin]# ./hadoop-daemon.sh start nfs3  //启动 mountd and nfsd进程
starting nfs3, logging to /summer/hadoop/logs/hadoop-root-nfs3-master.out
DEPRECATED: Use of this script to execute hdfs command is deprecated.
Instead use the hdfs command for it.
[root@master sbin]# jps  //验证nfs3进程
88064 SecondaryNameNode
94704 Nfs3
95650 Jps
87028 DataNode
86446 NameNode
92350 Portmap
[root@master sbin]# rpcinfo -p 192.168.0.95  //验证所有服务是否已启动和运行
   program vers proto   port  service
    100005    3   udp   4242  mountd
    100005    1   tcp   4242  mountd
    100000    2   udp    111  portmapper
    100000    2   tcp    111  portmapper
    100005    3   tcp   4242  mountd
    100005    2   tcp   4242  mountd
    100003    3   tcp   2049  nfs
    100005    2   udp   4242  mountd
    100005    1   udp   4242  mountd
[root@master sbin]# showmount -e 192.168.0.95  //验证HDFS的namespace是否导出并可以挂载。
Export list for 192.168.0.95:
/ *
[root@master sbin]#
```

## 5.本机挂载

- 创建目录并挂载

```shell
[root@master sbin]# mkdir /hdfs
[root@master sbin]# mount -t nfs -o vers=3,proto=tcp,nolock,noacl 192.168.0.95:/ /hdfs/
[root@master sbin]# df -h
文件系统                 容量  已用  可用 已用% 挂载点
/dev/mapper/centos-root  468G   34G  435G    8% /
devtmpfs                 7.8G     0  7.8G    0% /dev
tmpfs                    7.8G     0  7.8G    0% /dev/shm
tmpfs                    7.8G  755M  7.1G   10% /run
tmpfs                    7.8G     0  7.8G    0% /sys/fs/cgroup
/dev/sda1               1014M  142M  873M   14% /boot
/dev/mapper/centos-home   24G  257M   24G    2% /home
tmpfs                    1.6G     0  1.6G    0% /run/user/1000
tmpfs                    1.6G     0  1.6G    0% /run/user/0
192.168.0.95:/           468G   34G  435G    8% /hdfs
[root@master sbin]# 
```

## 6.跨机器挂载

>这里模拟node1（192.168.0.96）挂载远端HDFS文件系统（192.168.0.95）

```shell
[root@node1 mnt]# showmount -e 192.168.0.95
Export list for 192.168.0.95:
/ *
[root@node1 mnt]# mount 192.168.0.95:/ /mnt/
[root@node1 mnt]#
```

## 7.双向验证

> 在95机器（hdfs文件系统中）创建文件，验证96机器挂载点是否同步生成文件或文件夹
> 具体操作如下：

```shell
[root@master sbin]# hdfs dfs -mkdir /user
[root@master sbin]# hdfs dfs -mkdir /user/test
[root@master sbin]# hdfs dfs -ls /
Found 1 items
drwxr-xr-x   - root supergroup          0 2021-03-05 14:23 /user
[root@master sbin]# hdfs dfs -ls /user
Found 1 items
drwxr-xr-x   - root supergroup          0 2021-03-05 14:23 /user/test
[root@master sbin]# cd /hdfs/
[root@master hdfs]# ls
user
[root@master hdfs]# ll
总用量 1
drwxr-xr-x 3 root 2584148964 96 3月   5 14:23 user
[root@master hdfs]# cd user/
[root@master user]# ls
test
[root@master user]# 
```


>可以查看96上机器挂载点上同步生成了文件

```shell
[root@node1 mnt]# cd /mnt/
[root@node1 mnt]# ll
总用量 1
drwxr-xr-x 3 root 2584148964 96 3月   5 14:23 user
[root@node1 mnt]# cd user/
[root@node1 user]# ll
总用量 1
drwxr-xr-x 2 root 2584148964 64 3月   5 14:23 test
[root@node1 user]#
```

> 在96机器挂载点上创建文件或文件夹，验证95机器（hdfs文件系统中）是否同步生成文件
> 这里96创建一个文件

```shell
[root@node1 user]# touch 1234.sh
[root@node1 user]# ll
总用量 1
-rw-r--r-- 1 root root        0 3月   5 14:31 1234.sh
drwxr-xr-x 2 root 2584148964 64 3月   5 14:23 test
[root@node1 user]# 
```

> 可以查看95机器hdfs文件系统同步生成了一个文件

```shell
[root@master user]# hdfs dfs -ls /user
Found 2 items
-rw-r--r--   1 root root                0 2021-03-05 14:31 /user/1234.sh
drwxr-xr-x   - root supergroup          0 2021-03-05 14:23 /user/test
[root@master user]# 
```

> 这里模拟上传文件夹到96挂载点上

```shell
[root@node1 summer]# mv elasticsearch_cluster/ /mnt/
[root@node1 summer]# cd /mnt/
[root@node1 mnt]# ls
elasticsearch_cluster  user
[root@node1 mnt]# 
```

> 可以查看95机器hdfs文件系统中同步了该文件

```shell
[root@master user]# hdfs dfs -ls /
Found 2 items
drwxr-xr-x   - summer summer          0 2021-01-28 18:10 /elasticsearch_cluster
drwxr-xr-x   - root        supergroup           0 2021-03-05 14:31 /user
[root@master user]# 
```

> 也可通过浏览器直观查看

![](https://cdn.jsdelivr.net/gh/summerking1/image@main/0305-3.png)